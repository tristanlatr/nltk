<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>nltk.metrics.distance</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            <a href="https://github.com/tristanlatr/nltk" class="projecthome">Natural Language Toolkit</a> <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="nltk.html">nltk</a></code><wbr></wbr>.<code><a href="nltk.metrics.html">metrics</a></code><wbr></wbr>.<code><a href="nltk.metrics.distance.html">distance</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p class="pre">Distance Metrics.

Compute the distance between two items (usually strings).
As metrics, they must satisfy the following three requirements:

1. d(a, a) = 0
2. d(a, b) &gt;= 0
3. d(a, c) &lt;= d(a, b) + d(b, c)</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id821">
  
  
  <tr class="function">
    
    <td>Function</td>
    <td><code><a href="#binary_distance">binary_distance</a></code></td>
    <td><span>Simple equality test.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#custom_distance">custom_distance</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#demo">demo</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#edit_distance">edit_distance</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#edit_distance_align">edit_distance_align</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#fractional_presence">fractional_presence</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#interval_distance">interval_distance</a></code></td>
    <td><span>Krippendorff's interval distance metric</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#jaccard_distance">jaccard_distance</a></code></td>
    <td><span>Distance metric comparing set-similarity.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#jaro_similarity">jaro_similarity</a></code></td>
    <td><span>Computes the Jaro similarity between 2 sequences from:</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#jaro_winkler_similarity">jaro_winkler_similarity</a></code></td>
    <td><span>The Jaro Winkler distance is an extension of the Jaro similarity in:</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#masi_distance">masi_distance</a></code></td>
    <td><span>Distance metric that takes into account partial agreement when multiple labels are assigned.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#presence">presence</a></code></td>
    <td><span>Higher-order function to test presence of a given label</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_edit_dist_backtrace">_edit_dist_backtrace</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_edit_dist_init">_edit_dist_init</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_edit_dist_step">_edit_dist_step</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="nltk.metrics.distance.binary_distance">
    
  </a>
  <a name="binary_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">binary_distance</span>(label1, label2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L175">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Simple equality test.

0.0 if the labels are identical, 1.0 if they are different.

&gt;&gt;&gt; from nltk.metrics import binary_distance
&gt;&gt;&gt; binary_distance(1,1)
0.0

&gt;&gt;&gt; binary_distance(1,3)
1.0</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.custom_distance">
    
  </a>
  <a name="custom_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">custom_distance</span>(file):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L262">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.demo">
    
  </a>
  <a name="demo">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">demo</span>():
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L453">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.edit_distance">
    
  </a>
  <a name="edit_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">edit_distance</span>(s1, s2, substitution_cost=1, transpositions=False):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L59">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Calculate the Levenshtein edit-distance between two strings.
The edit distance is the number of characters that need to be
substituted, inserted, or deleted, to transform s1 into s2.  For
example, transforming "rain" to "shine" requires three steps,
consisting of two substitutions and one insertion:
"rain" -&gt; "sain" -&gt; "shin" -&gt; "shine".  These operations could have
been done in other orders, but at least three steps are needed.

Allows specifying the cost of substitution edits (e.g., "a" -&gt; "b"),
because sometimes it makes sense to assign greater penalties to
substitutions.

This also optionally allows transposition edits (e.g., "ab" -&gt; "ba"),
though this is disabled by default.

:param s1, s2: The strings to be analysed
:param transpositions: Whether to allow transposition edits
:type s1: str
:type s2: str
:type substitution_cost: int
:type transpositions: bool
:rtype int</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.edit_distance_align">
    
  </a>
  <a name="edit_distance_align">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">edit_distance_align</span>(s1, s2, substitution_cost=1):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L125">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Calculate the minimum Levenshtein edit-distance based alignment
mapping between two strings. The alignment finds the mapping
from string s1 to s2 that minimizes the edit distance cost.
For example, mapping "rain" to "shine" would involve 2
substitutions, 2 matches and an insertion resulting in
the following mapping:
[(0, 0), (1, 1), (2, 2), (3, 3), (4, 4), (4, 5)]
NB: (0, 0) is the start state without any letters associated
See more: https://web.stanford.edu/class/cs124/lec/med.pdf

In case of multiple valid minimum-distance alignments, the
backtrace has the following operation precedence:
1. Skip s1 character
2. Skip s2 character
3. Substitute s1 and s2 characters
The backtrace is carried out in reverse string order.

This function does not support transposition.

:param s1, s2: The strings to be aligned
:type s1: str
:type s2: str
:type substitution_cost: int
:rtype List[Tuple(int, int)]</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.fractional_presence">
    
  </a>
  <a name="fractional_presence">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">fractional_presence</span>(label):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L252">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.interval_distance">
    
  </a>
  <a name="interval_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">interval_distance</span>(label1, label2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L228">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Krippendorff's interval distance metric

&gt;&gt;&gt; from nltk.metrics import interval_distance
&gt;&gt;&gt; interval_distance(1,10)
81

Krippendorff 1980, Content Analysis: An Introduction to its Methodology</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.jaccard_distance">
    
  </a>
  <a name="jaccard_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">jaccard_distance</span>(label1, label2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L191">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Distance metric comparing set-similarity.

    </p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.jaro_similarity">
    
  </a>
  <a name="jaro_similarity">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">jaro_similarity</span>(s1, s2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L273">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Computes the Jaro similarity between 2 sequences from:

     Matthew A. Jaro (1989). Advances in record linkage methodology
     as applied to the 1985 census of Tampa Florida. Journal of the
     American Statistical Association. 84 (406): 414-20.

 The Jaro distance between is the min no. of single-character transpositions
 required to change one word into another. The Jaro similarity formula from
 https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance :

     jaro_sim = 0 if m = 0 else 1/3 * (m/|s_1| + m/s_2 + (m-t)/m)

 where:
     - |s_i| is the length of string s_i
     - m is the no. of matching characters
     - t is the half no. of possible transpositions.

 </p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.jaro_winkler_similarity">
    
  </a>
  <a name="jaro_winkler_similarity">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">jaro_winkler_similarity</span>(s1, s2, p=0.1, max_l=4):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L335">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">The Jaro Winkler distance is an extension of the Jaro similarity in:

    William E. Winkler. 1990. String Comparator Metrics and Enhanced
    Decision Rules in the Fellegi-Sunter Model of Record Linkage.
    Proceedings of the Section on Survey Research Methods.
    American Statistical Association: 354-359.
such that:

    jaro_winkler_sim = jaro_sim + ( l * p * (1 - jaro_sim) )

where,

    - jaro_sim is the output from the Jaro Similarity,
    see jaro_similarity()
    - l is the length of common prefix at the start of the string
        - this implementation provides an upperbound for the l value
          to keep the prefixes.A common value of this upperbound is 4.
    - p is the constant scaling factor to overweigh common prefixes.
      The Jaro-Winkler similarity will fall within the [0, 1] bound,
      given that max(p)&lt;=0.25 , default is p=0.1 in Winkler (1990)


Test using outputs from https://www.census.gov/srd/papers/pdf/rr93-8.pdf
from "Table 5 Comparison of String Comparators Rescaled between 0 and 1"

&gt;&gt;&gt; winkler_examples = [("billy", "billy"), ("billy", "bill"), ("billy", "blily"),
... ("massie", "massey"), ("yvette", "yevett"), ("billy", "bolly"), ("dwayne", "duane"),
... ("dixon", "dickson"), ("billy", "susan")]

&gt;&gt;&gt; winkler_scores = [1.000, 0.967, 0.947, 0.944, 0.911, 0.893, 0.858, 0.853, 0.000]
&gt;&gt;&gt; jaro_scores =    [1.000, 0.933, 0.933, 0.889, 0.889, 0.867, 0.822, 0.790, 0.000]

    # One way to match the values on the Winkler's paper is to provide a different
# p scaling factor for different pairs of strings, e.g.
&gt;&gt;&gt; p_factors = [0.1, 0.125, 0.20, 0.125, 0.20, 0.20, 0.20, 0.15, 0.1]

&gt;&gt;&gt; for (s1, s2), jscore, wscore, p in zip(winkler_examples, jaro_scores, winkler_scores, p_factors):
...     assert round(jaro_similarity(s1, s2), 3) == jscore
...     assert round(jaro_winkler_similarity(s1, s2, p=p), 3) == wscore


Test using outputs from https://www.census.gov/srd/papers/pdf/rr94-5.pdf from
"Table 2.1. Comparison of String Comparators Using Last Names, First Names, and Street Names"

&gt;&gt;&gt; winkler_examples = [('SHACKLEFORD', 'SHACKELFORD'), ('DUNNINGHAM', 'CUNNIGHAM'),
... ('NICHLESON', 'NICHULSON'), ('JONES', 'JOHNSON'), ('MASSEY', 'MASSIE'),
... ('ABROMS', 'ABRAMS'), ('HARDIN', 'MARTINEZ'), ('ITMAN', 'SMITH'),
... ('JERALDINE', 'GERALDINE'), ('MARHTA', 'MARTHA'), ('MICHELLE', 'MICHAEL'),
... ('JULIES', 'JULIUS'), ('TANYA', 'TONYA'), ('DWAYNE', 'DUANE'), ('SEAN', 'SUSAN'),
... ('JON', 'JOHN'), ('JON', 'JAN'), ('BROOKHAVEN', 'BRROKHAVEN'),
... ('BROOK HALLOW', 'BROOK HLLW'), ('DECATUR', 'DECATIR'), ('FITZRUREITER', 'FITZENREITER'),
... ('HIGBEE', 'HIGHEE'), ('HIGBEE', 'HIGVEE'), ('LACURA', 'LOCURA'), ('IOWA', 'IONA'), ('1ST', 'IST')]

&gt;&gt;&gt; jaro_scores =   [0.970, 0.896, 0.926, 0.790, 0.889, 0.889, 0.722, 0.467, 0.926,
... 0.944, 0.869, 0.889, 0.867, 0.822, 0.783, 0.917, 0.000, 0.933, 0.944, 0.905,
... 0.856, 0.889, 0.889, 0.889, 0.833, 0.000]

&gt;&gt;&gt; winkler_scores = [0.982, 0.896, 0.956, 0.832, 0.944, 0.922, 0.722, 0.467, 0.926,
... 0.961, 0.921, 0.933, 0.880, 0.858, 0.805, 0.933, 0.000, 0.947, 0.967, 0.943,
... 0.913, 0.922, 0.922, 0.900, 0.867, 0.000]

    # One way to match the values on the Winkler's paper is to provide a different
# p scaling factor for different pairs of strings, e.g.
&gt;&gt;&gt; p_factors = [0.1, 0.1, 0.1, 0.1, 0.125, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.20,
... 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]


&gt;&gt;&gt; for (s1, s2), jscore, wscore, p in zip(winkler_examples, jaro_scores, winkler_scores, p_factors):
...     if (s1, s2) in [('JON', 'JAN'), ('1ST', 'IST')]:
...         continue  # Skip bad examples from the paper.
...     assert round(jaro_similarity(s1, s2), 3) == jscore
...     assert round(jaro_winkler_similarity(s1, s2, p=p), 3) == wscore



This test-case proves that the output of Jaro-Winkler similarity depends on
the product  l * p and not on the product max_l * p. Here the product max_l * p &gt; 1
however the product l * p &lt;= 1

&gt;&gt;&gt; round(jaro_winkler_similarity('TANYA', 'TONYA', p=0.1, max_l=100), 3)
0.88</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.masi_distance">
    
  </a>
  <a name="masi_distance">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">masi_distance</span>(label1, label2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L200">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Distance metric that takes into account partial agreement when multiple
labels are assigned.

&gt;&gt;&gt; from nltk.metrics import masi_distance
&gt;&gt;&gt; masi_distance(set([1, 2]), set([1, 2, 3, 4]))
0.665

Passonneau 2006, Measuring Agreement on Set-Valued Items (MASI)
for Semantic and Pragmatic Annotation.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.metrics.distance.presence">
    
  </a>
  <a name="presence">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">presence</span>(label):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L245">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Higher-order function to test presence of a given label
    </p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.metrics.distance._edit_dist_backtrace">
    
  </a>
  <a name="_edit_dist_backtrace">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_edit_dist_backtrace</span>(lev):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L104">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.metrics.distance._edit_dist_init">
    
  </a>
  <a name="_edit_dist_init">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_edit_dist_init</span>(len1, len2):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L27">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.metrics.distance._edit_dist_step">
    
  </a>
  <a name="_edit_dist_step">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_edit_dist_step</span>(lev, i, j, s1, s2, substitution_cost=1, transpositions=False):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/metrics/distance.py#L38">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://github.com/tristanlatr/nltk" class="projecthome">Natural Language Toolkit</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2021-06-22 02:51:08.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>