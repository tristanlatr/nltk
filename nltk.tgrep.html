<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>nltk.tgrep</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            <a href="https://github.com/tristanlatr/nltk" class="projecthome">Natural Language Toolkit</a> <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="nltk.html">nltk</a></code><wbr></wbr>.<code><a href="nltk.tgrep.html">tgrep</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p class="pre">============================================
 TGrep search implementation for NLTK trees
============================================

This module supports TGrep2 syntax for matching parts of NLTK Trees.
Note that many tgrep operators require the tree passed to be a
``ParentedTree``.

External links:

- `Tgrep tutorial &lt;http://www.stanford.edu/dept/linguistics/corpora/cas-tut-tgrep.html&gt;`_
- `Tgrep2 manual &lt;http://tedlab.mit.edu/~dr/Tgrep2/tgrep2.pdf&gt;`_
- `Tgrep2 source &lt;http://tedlab.mit.edu/~dr/Tgrep2/&gt;`_

Usage
=====

&gt;&gt;&gt; from nltk.tree import ParentedTree
&gt;&gt;&gt; from nltk.tgrep import tgrep_nodes, tgrep_positions
&gt;&gt;&gt; tree = ParentedTree.fromstring('(S (NP (DT the) (JJ big) (NN dog)) (VP bit) (NP (DT a) (NN cat)))')
&gt;&gt;&gt; list(tgrep_nodes('NN', [tree]))
[[ParentedTree('NN', ['dog']), ParentedTree('NN', ['cat'])]]
&gt;&gt;&gt; list(tgrep_positions('NN', [tree]))
[[(0, 2), (2, 1)]]
&gt;&gt;&gt; list(tgrep_nodes('DT', [tree]))
[[ParentedTree('DT', ['the']), ParentedTree('DT', ['a'])]]
&gt;&gt;&gt; list(tgrep_nodes('DT $ JJ', [tree]))
[[ParentedTree('DT', ['the'])]]

This implementation adds syntax to select nodes based on their NLTK
tree position.  This syntax is ``N`` plus a Python tuple representing
the tree position.  For instance, ``N()``, ``N(0,)``, ``N(0,0)`` are
valid node selectors.  Example:

&gt;&gt;&gt; tree = ParentedTree.fromstring('(S (NP (DT the) (JJ big) (NN dog)) (VP bit) (NP (DT a) (NN cat)))')
&gt;&gt;&gt; tree[0,0]
ParentedTree('DT', ['the'])
&gt;&gt;&gt; tree[0,0].treeposition()
(0, 0)
&gt;&gt;&gt; list(tgrep_nodes('N(0,0)', [tree]))
[[ParentedTree('DT', ['the'])]]

Caveats:
========

- Link modifiers: "?" and "=" are not implemented.
- Tgrep compatibility: Using "@" for "!", "{" for "&lt;", "}" for "&gt;" are
  not implemented.
- The "=" and "~" links are not implemented.

Known Issues:
=============

- There are some issues with link relations involving leaf nodes
  (which are represented as bare strings in NLTK trees).  For
  instance, consider the tree::

      (S (A x))

  The search string ``* !&gt;&gt; S`` should select all nodes which are not
  dominated in some way by an ``S`` node (i.e., all nodes which are
  not descendants of an ``S``).  Clearly, in this tree, the only node
  which fulfills this criterion is the top node (since it is not
  dominated by anything).  However, the code here will find both the
  top node and the leaf node ``x``.  This is because we cannot recover
  the parent of the leaf, since it is stored as a bare string.

  A possible workaround, when performing this kind of search, would be
  to filter out all leaf nodes.

Implementation notes
====================

This implementation is (somewhat awkwardly) based on lambda functions
which are predicates on a node.  A predicate is a function which is
either True or False; using a predicate function, we can identify sets
of nodes with particular properties.  A predicate function, could, for
instance, return True only if a particular node has a label matching a
particular regular expression, and has a daughter node which has no
sisters.  Because tgrep2 search strings can do things statefully (such
as substituting in macros, and binding nodes with node labels), the
actual predicate function is declared with three arguments::

    pred = lambda n, m, l: return True # some logic here

``n``
    is a node in a tree; this argument must always be given

``m``
    contains a dictionary, mapping macro names onto predicate functions

``l``
    is a dictionary to map node labels onto nodes in the tree

``m`` and ``l`` are declared to default to ``None``, and so need not be
specified in a call to a predicate.  Predicates which call other
predicates must always pass the value of these arguments on.  The
top-level predicate (constructed by ``_tgrep_exprs_action``) binds the
macro definitions to ``m`` and initialises ``l`` to an empty dictionary.</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id1774">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="nltk.tgrep.TgrepException.html">TgrepException</a></code></td>
    <td><span>Tgrep exception type.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ancestors">ancestors</a></code></td>
    <td><span>Returns the list of all nodes dominating the given tree node. This method will not work with leaf nodes, since there is no way to recover the parent.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#tgrep_compile">tgrep_compile</a></code></td>
    <td><span>Parses (and tokenizes, if necessary) a TGrep search string into a lambda function.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#tgrep_nodes">tgrep_nodes</a></code></td>
    <td><span>Return the tree nodes in the trees which match the given pattern.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#tgrep_positions">tgrep_positions</a></code></td>
    <td><span>Return the tree positions in the trees which match the given pattern.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#tgrep_tokenize">tgrep_tokenize</a></code></td>
    <td><span>Tokenizes a TGrep search string into separate tokens.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#treepositions_no_leaves">treepositions_no_leaves</a></code></td>
    <td><span>Returns all the tree positions in the given tree which are not leaf nodes.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#unique_ancestors">unique_ancestors</a></code></td>
    <td><span>Returns the list of all nodes dominating the given node, where there is only a single path of descent.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_after">_after</a></code></td>
    <td><span>Returns the set of all nodes that are after the given node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_before">_before</a></code></td>
    <td><span>Returns the set of all nodes that are before the given node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_build_tgrep_parser">_build_tgrep_parser</a></code></td>
    <td><span>Builds a pyparsing-based parser object for tokenizing and interpreting tgrep search strings.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_descendants">_descendants</a></code></td>
    <td><span>Returns the list of all nodes which are descended from the given tree node in some way.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_immediately_after">_immediately_after</a></code></td>
    <td><span>Returns the set of all nodes that are immediately after the given node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_immediately_before">_immediately_before</a></code></td>
    <td><span>Returns the set of all nodes that are immediately before the given node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_istree">_istree</a></code></td>
    <td><span>Predicate to check whether `obj` is a nltk.tree.Tree.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_leftmost_descendants">_leftmost_descendants</a></code></td>
    <td><span>Returns the set of all nodes descended in some way through left branches from this node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_macro_defn_action">_macro_defn_action</a></code></td>
    <td><span>Builds a dictionary structure which defines the given macro.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_rightmost_descendants">_rightmost_descendants</a></code></td>
    <td><span>Returns the set of all nodes descended in some way through right branches from this node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_bind_node_label_action">_tgrep_bind_node_label_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node which can optionally bind a matching node into the tgrep2 string's label_dict.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_conjunction_action">_tgrep_conjunction_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node from the conjunction of several other such lambda functions.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_exprs_action">_tgrep_exprs_action</a></code></td>
    <td><span>This is the top-lebel node in a tgrep2 search string; the predicate function it returns binds together all the state of a tgrep2 search string.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_macro_use_action">_tgrep_macro_use_action</a></code></td>
    <td><span>Builds a lambda function which looks up the macro name used.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_nltk_tree_pos_action">_tgrep_nltk_tree_pos_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node which returns true if the node is located at a specific tree position.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_node_action">_tgrep_node_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node depending on the name of its node.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_node_label_pred_use_action">_tgrep_node_label_pred_use_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node which describes the use of a previously bound node label.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_node_label_use_action">_tgrep_node_label_use_action</a></code></td>
    <td><span>Returns the node label used to begin a tgrep_expr_labeled.  See `_tgrep_segmented_pattern_action`.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_node_literal_value">_tgrep_node_literal_value</a></code></td>
    <td><span>Gets the string value of a given parse tree node, for comparison using the tgrep node literal predicates.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_parens_action">_tgrep_parens_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node from a parenthetical notation.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_rel_disjunction_action">_tgrep_rel_disjunction_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node from the disjunction of several other such lambda functions.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_relation_action">_tgrep_relation_action</a></code></td>
    <td><span>Builds a lambda function representing a predicate on a tree node depending on its relation to other nodes in the tree.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_tgrep_segmented_pattern_action">_tgrep_segmented_pattern_action</a></code></td>
    <td><span>Builds a lambda function representing a segmented pattern.</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_unique_descendants">_unique_descendants</a></code></td>
    <td><span>Returns the list of all nodes descended from the given node, where there is only a single path of descent.</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="nltk.tgrep.ancestors">
    
  </a>
  <a name="ancestors">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ancestors</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L131">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the list of all nodes dominating the given tree node.
This method will not work with leaf nodes, since there is no way
to recover the parent.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.tgrep_compile">
    
  </a>
  <a name="tgrep_compile">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">tgrep_compile</span>(tgrep_string):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L969">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Parses (and tokenizes, if necessary) a TGrep search string into a
lambda function.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.tgrep_nodes">
    
  </a>
  <a name="tgrep_nodes">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">tgrep_nodes</span>(pattern, trees, search_leaves=True):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L1022">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Return the tree nodes in the trees which match the given pattern.

:param pattern: a tgrep search pattern
:type pattern: str or output of tgrep_compile()
:param trees: a sequence of NLTK trees (usually ParentedTrees)
:type trees: iter(ParentedTree) or iter(Tree)
:param search_leaves: whether ot return matching leaf nodes
:type search_leaves: bool
:rtype: iter(tree nodes)</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.tgrep_positions">
    
  </a>
  <a name="tgrep_positions">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">tgrep_positions</span>(pattern, trees, search_leaves=True):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L995">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Return the tree positions in the trees which match the given pattern.

:param pattern: a tgrep search pattern
:type pattern: str or output of tgrep_compile()
:param trees: a sequence of NLTK trees (usually ParentedTrees)
:type trees: iter(ParentedTree) or iter(Tree)
:param search_leaves: whether ot return matching leaf nodes
:type search_leaves: bool
:rtype: iter(tree positions)</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.tgrep_tokenize">
    
  </a>
  <a name="tgrep_tokenize">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">tgrep_tokenize</span>(tgrep_string):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L959">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Tokenizes a TGrep search string into separate tokens.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.treepositions_no_leaves">
    
  </a>
  <a name="treepositions_no_leaves">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">treepositions_no_leaves</span>(tree):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L980">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns all the tree positions in the given tree which are not
leaf nodes.</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="nltk.tgrep.unique_ancestors">
    
  </a>
  <a name="unique_ancestors">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">unique_ancestors</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L149">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the list of all nodes dominating the given node, where
there is only a single path of descent.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._after">
    
  </a>
  <a name="_after">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_after</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L258">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes that are after the given node.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._before">
    
  </a>
  <a name="_before">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_before</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L220">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes that are before the given node.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._build_tgrep_parser">
    
  </a>
  <a name="_build_tgrep_parser">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_build_tgrep_parser</span>(set_parse_actions=True):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L855">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a pyparsing-based parser object for tokenizing and
interpreting tgrep search strings.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._descendants">
    
  </a>
  <a name="_descendants">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_descendants</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L166">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the list of all nodes which are descended from the given
tree node in some way.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._immediately_after">
    
  </a>
  <a name="_immediately_after">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_immediately_after</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L270">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes that are immediately after the given
node.

Tree node A immediately follows node B if the first terminal
symbol (word) produced by A immediately follows the last
terminal symbol produced by B.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._immediately_before">
    
  </a>
  <a name="_immediately_before">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_immediately_before</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L232">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes that are immediately before the given
node.

Tree node A immediately precedes node B if the last terminal
symbol (word) produced by A immediately precedes the first
terminal symbol produced by B.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._istree">
    
  </a>
  <a name="_istree">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_istree</span>(obj):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L202">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Predicate to check whether `obj` is a nltk.tree.Tree.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._leftmost_descendants">
    
  </a>
  <a name="_leftmost_descendants">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_leftmost_descendants</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L178">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes descended in some way through
left branches from this node.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._macro_defn_action">
    
  </a>
  <a name="_macro_defn_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_macro_defn_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L815">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a dictionary structure which defines the given macro.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._rightmost_descendants">
    
  </a>
  <a name="_rightmost_descendants">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_rightmost_descendants</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L190">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the set of all nodes descended in some way through
right branches from this node.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_bind_node_label_action">
    
  </a>
  <a name="_tgrep_bind_node_label_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_bind_node_label_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L761">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
which can optionally bind a matching node into the tgrep2 string's
label_dict.

Called for expressions like (`tgrep_node_expr2`)::

    /NP/
    @NP=n</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_conjunction_action">
    
  </a>
  <a name="_tgrep_conjunction_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_conjunction_action</span>(_s, _l, tokens, join_char='&amp;'):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L632">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
from the conjunction of several other such lambda functions.

This is prototypically called for expressions like
(`tgrep_rel_conjunction`)::

    &lt; NP &amp; &lt; AP &lt; VP

where tokens is a list of predicates representing the relations
(`&lt; NP`, `&lt; AP`, and `&lt; VP`), possibly with the character `&amp;`
included (as in the example here).

This is also called for expressions like (`tgrep_node_expr2`)::

    NP &lt; NN
    S=s &lt; /NP/=n : s &lt; /VP/=v : n .. v

tokens[0] is a tgrep_expr predicate; tokens[1:] are an (optional)
list of segmented patterns (`tgrep_expr_labeled`, processed by
`_tgrep_segmented_pattern_action`).</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_exprs_action">
    
  </a>
  <a name="_tgrep_exprs_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_exprs_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L824">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">This is the top-lebel node in a tgrep2 search string; the
predicate function it returns binds together all the state of a
tgrep2 search string.

Builds a lambda function representing a predicate on a tree node
from the disjunction of several tgrep expressions.  Also handles
macro definitions and macro name binding, and node label
definitions and node label binding.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_macro_use_action">
    
  </a>
  <a name="_tgrep_macro_use_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_macro_use_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L307">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function which looks up the macro name used.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_nltk_tree_pos_action">
    
  </a>
  <a name="_tgrep_nltk_tree_pos_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_nltk_tree_pos_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L383">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
which returns true if the node is located at a specific tree
position.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_node_action">
    
  </a>
  <a name="_tgrep_node_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_node_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L323">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
depending on the name of its node.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_node_label_pred_use_action">
    
  </a>
  <a name="_tgrep_node_label_pred_use_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_node_label_pred_use_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L730">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
which describes the use of a previously bound node label.

Called for expressions like (`tgrep_node_label_use_pred`)::

    =s

when they appear inside a tgrep_node_expr (for example, inside a
relation).  The predicate returns true if and only if its node
argument is identical the the node looked up in the node label
dictionary using the node's label.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_node_label_use_action">
    
  </a>
  <a name="_tgrep_node_label_use_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_node_label_use_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L711">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the node label used to begin a tgrep_expr_labeled.  See
`_tgrep_segmented_pattern_action`.

Called for expressions like (`tgrep_node_label_use`)::

    =s

when they appear as the first element of a `tgrep_expr_labeled`
expression (see `_tgrep_segmented_pattern_action`).

It returns the node label.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_node_literal_value">
    
  </a>
  <a name="_tgrep_node_literal_value">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_node_literal_value</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L299">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Gets the string value of a given parse tree node, for comparison
using the tgrep node literal predicates.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_parens_action">
    
  </a>
  <a name="_tgrep_parens_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_parens_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L372">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
from a parenthetical notation.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_rel_disjunction_action">
    
  </a>
  <a name="_tgrep_rel_disjunction_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_rel_disjunction_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L800">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
from the disjunction of several other such lambda functions.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_relation_action">
    
  </a>
  <a name="_tgrep_relation_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_relation_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L399">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a predicate on a tree node
depending on its relation to other nodes in the tree.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._tgrep_segmented_pattern_action">
    
  </a>
  <a name="_tgrep_segmented_pattern_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tgrep_segmented_pattern_action</span>(_s, _l, tokens):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L667">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Builds a lambda function representing a segmented pattern.

Called for expressions like (`tgrep_expr_labeled`)::

    =s .. =v &lt; =n

This is a segmented pattern, a tgrep2 expression which begins with
a node label.

The problem is that for segemented_pattern_action (': =v &lt; =s'),
the first element (in this case, =v) is specifically selected by
virtue of matching a particular node in the tree; to retrieve
the node, we need the label, not a lambda function.  For node
labels inside a tgrep_node_expr, we need a lambda function which
returns true if the node visited is the same as =v.

We solve this by creating two copies of a node_label_use in the
grammar; the label use inside a tgrep_expr_labeled has a separate
parse action to the pred use inside a node_expr.  See
`_tgrep_node_label_use_action` and
`_tgrep_node_label_pred_use_action`.</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="nltk.tgrep._unique_descendants">
    
  </a>
  <a name="_unique_descendants">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_unique_descendants</span>(node):
    <a class="sourceLink" href="https://github.com/tristanlatr/nltk/tree/f83d0acf07ed0fd627306ec5ae73265b05025e51/nltk/tgrep.py#L207">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="pre">Returns the list of all nodes descended from the given node, where
there is only a single path of descent.</p></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://github.com/tristanlatr/nltk" class="projecthome">Natural Language Toolkit</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2021-06-22 02:51:08.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>